{% extends 'base.html' %} {% block content %}
<div class="container-fluid m-3">
    <h1 class="text-center">Appointments</h1>
    <div class="row m-3 text-center">
        <div class="col-sm m-3 m-md-0">
            <button class="btn btn-primary getAppointments">
                Retrieve appointments from WCOnline
            </button>
        </div>
        <div class="col-sm m-3 m-md-0">
            <a
                class="btn btn-primary"
                href="https://mohawk2.mywconline.com/"
                target="_blank"
                >Go to WCOnline</a
            >
        </div>
        <div class="col-sm m-3 m-md-0">
            <button class="btn btn-primary addAllEvents">Add all appointments</button>
        </div>
    </div>

    <div class="row m-3 text-center d-none" id="progressRow">
        <div class="col">
            <div class="progress">
                <div
                    class="progress-bar progress-bar-striped progress-bar-animated"
                    role="progressbar"
                    aria-valuenow="0"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    style="width: 0%"
                >
                    0%
                </div>
            </div>
        </div>
    </div>

    <div class="row m-3">
        <table
            class="table table-striped table-bordered table-responsive"
            id="appointments"
            style="width: 100%"
        >
            <thead class="text-center">
                <tr>
                    <th class="d-none">Sort</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Name</th>
                    <th>Course</th>
                    <th class="d-none d-lg-table-cell">Comments</th>
                    <th class="d-none d-md-table-cell">ESL</th>
                    <th>Link</th>
                    <th class="d-none d-md-table-cell">Add to Calendar</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                <tr>
                    <td class="d-none">{{ appointment.sort }}</td>
                    <td>{{ appointment.start }}</td>
                    <td>{{ appointment.end }}</td>
                    <td>{{ appointment.name }}</td>
                    <td>{{ appointment.course }}</td>
                    <td class="d-none d-lg-table-cell">
                        <p>{{ appointment.comments }}</p>
                    </td>
                    <td class="d-none d-md-table-cell">{{ appointment.esl }}</td>
                    <td>
                        <a href="/appointment/{{ appointment.id }}">View Appointment</a>
                    </td>
                    <td class="d-none d-md-table-cell">
                        {% if not(appointment.added) %}
                        <button
                            class="btn btn-primary addEvent"
                            id="{{ appointment.id }}"
                        >
                            Add
                        </button>
                        {% else %}
                        <button class="btn btn-secondary addEvent" disabled>Added</button>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %} {% block scripts %}
<link
    href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css"
    rel="stylesheet"
/>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#appointments").DataTable({
            order: [[0, "asc"]],
            // scrollX: true,
        });
    });
</script>
{% endblock %}
